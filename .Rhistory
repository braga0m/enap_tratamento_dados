#pacotes
if (!require("pacman")) install.packages("pacman")
pacman::p_load('tidyverse','readxl','data.table','writexl')
search()
getwd()
getwd()
saude <- dados('../ENAP/enap_manipulacao/datasets_enap_padrao/Dataset_Saúde.xlsx','Saúde')
dados <- function(arquivo,campo){
area <- read_xlsx(arquivo)%>%
select(seq(8,ncol(.),3))%>%
head(1)%>%
select_if(~any(!is.na(.)))%>%
gather(1:ncol(.),key = 'Política', value = 'Data')%>%
#mutate(Data = as.Date.character(Data,format = '%d/%m/%Y'))%>%
mutate(Ano = format(Data,format = '%Y'))%>%
mutate(Área = rep(campo, nrow(.)))%>%
drop_na(Ano, Data)
return(area)
}
saude <- dados('../ENAP/enap_manipulacao/datasets_enap_padrao/Dataset_Saúde.xlsx','Saúde')
saude <- dados('../ENAP/enap_manipulacao/datasets_enap_padrao/Dataset_saúde.xlsx','Saúde')
saude <- dados('../enap_manipulacao/datasets_enap_padrao/Dataset_saúde.xlsx','Saúde')
View(saude)
dados <- function(arquivo_xlsx,campo){
area <- read_xlsx(str_c('/enap_manipulacao/datasets_enap_padrao/',arquivo_xlsx))%>%
select(seq(8,ncol(.),3))%>%
head(1)%>%
select_if(~any(!is.na(.)))%>%
gather(1:ncol(.),key = 'Política', value = 'Data')%>%
#mutate(Data = as.Date.character(Data,format = '%d/%m/%Y'))%>%
mutate(Ano = format(Data,format = '%Y'))%>%
mutate(Área = rep(campo, nrow(.)))%>%
drop_na(Ano, Data)
return(area)
saude1 <- dados('Dataset_saúde.xlsx','Saúde')
saude1 <- dados('Dataset_saúde.xlsx','Saúde')
xs
e
dados <- function(arquivo_xlsx,campo){
area <- read_xlsx(str_c('/enap_manipulacao/datasets_enap_padrao/',arquivo_xlsx))%>%
select(seq(8,ncol(.),3))%>%
head(1)%>%
select_if(~any(!is.na(.)))%>%
gather(1:ncol(.),key = 'Política', value = 'Data')%>%
#mutate(Data = as.Date.character(Data,format = '%d/%m/%Y'))%>%
mutate(Ano = format(Data,format = '%Y'))%>%
mutate(Área = rep(campo, nrow(.)))%>%
drop_na(Ano, Data)
return(area)
}
saude1 <- dados('Dataset_saúde.xlsx','Saúde')
dados <- function(arquivo_xlsx,campo){
area <- read_xlsx(str_c('../enap_manipulacao/datasets_enap_padrao/',arquivo_xlsx))%>%
select(seq(8,ncol(.),3))%>%
head(1)%>%
select_if(~any(!is.na(.)))%>%
gather(1:ncol(.),key = 'Política', value = 'Data')%>%
#mutate(Data = as.Date.character(Data,format = '%d/%m/%Y'))%>%
mutate(Ano = format(Data,format = '%Y'))%>%
mutate(Área = rep(campo, nrow(.)))%>%
drop_na(Ano, Data)
return(area)
}
saude1 <- dados('Dataset_saúde.xlsx','Saúde')
